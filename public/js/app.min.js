var portal;(function(c){var b=function(){return function(a,d){this.databases=a;this.tools=d}}();c.Config=b;b=function(){return function(a,d,b,c,e,f,g,h,k){this.id=a;this.type=d;this.name=b;this.description=c;this.dns=e;this.methods=f;this.tree=g;this.protocol=h;this.info=k}}();c.Database=b;b=function(){return function(a,d,b,c){this.name=a;this.description=d;this.dns=b;this.info=c}}();c.Tool=b})(portal||(portal={}));
(function(c){var b=function(){function a(){this.config=null;this.url="/"}a.prototype.getConfigUrl=function(){return this.url+"config?fmt=json"};return a}();c.ConfigService=b})(portal||(portal={}));
(function(c){var b=function(){function a(a,b,c,e,f){this.showError=!1;a.vm=this;this.configService=f;this.location=c;this.http=b;this.window=e;this.load()}a.prototype.retry=function(){this.showError=!1;this.load()};a.prototype.load=function(){var a=this;this.http.get(this.configService.getConfigUrl(),{timeout:5E3}).success(function(b,c){return a.handleData(b,c)}).error(function(b,c){return a.handleError(b,c)})};a.prototype.handleData=function(a,b){this.status="success";this.configService.config=a.impexconfiguration;
this.configService.config?this.location.path("/portal"):this.handleError(a,b)};a.prototype.handleError=function(a,b){console.log("config error");this.window.confirm("connection timed out. retry?")?this.load():(this.showError=!0,this.status=a+" "+b)};a.$inject="$scope $http $location $window configService $timeout".split(" ");return a}();c.ConfigCtrl=b})(portal||(portal={}));
(function(c){var b=function(){function a(a,b,c,e,f,g,h){var k=this;this.configAble=!0;this.ready=!1;this.scope=a;this.scope.vm=this;this.http=b;this.location=c;this.configService=h;this.config=this.configService.config;this.timeout=e;this.interval=f;this.window=g;null==this.config?c.path("/config"):this.timeout(function(){k.ready=!0})}a.prototype.doSomething=function(){};a.$inject="$scope $http $location $timeout $interval $window configService".split(" ");return a}();c.PortalCtrl=b})(portal||(portal=
{}));(function(c){var b=function(){function a(a,b){var c=this;this.configService=b;this.timeout=a;this.templateUrl="/public/partials/templates/databases.html";this.restrict="E";this.link=function(a,b,d){return c.linkFn(a,b,d)}}a.prototype.injection=function(){return["$timeout","configService",function(b,c){return new a(b,c)}]};a.prototype.linkFn=function(a,b,c){a.databasesvm=this;this.myScope=a};return a}();c.DatabasesDir=b})(portal||(portal={}));
(function(c){var b=angular.module("portal",["ngRoute"]);b.service("configService",c.ConfigService);b.controller("configCtrl",c.ConfigCtrl);b.controller("portalCtrl",c.PortalCtrl);b.directive("databasesDir",c.DatabasesDir.prototype.injection());b.config(["$routeProvider",function(a){a.when("/config",{templateUrl:"/public/partials/config.html",controller:"configCtrl"}).when("/portal",{templateUrl:"/public/partials/portal.html",controller:"portalCtrl"}).otherwise({redirectTo:"/config"})}]);b.run(["$rootScope",
"$window",function(a,b){a.windowWidth=b.outerWidth;angular.element(b).bind("resize",function(){a.windowWidth=b.outerWidth;a.$apply("windowWidth")})}])})(portal||(portal={}));
