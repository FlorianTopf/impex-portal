<div ng-show="regvm.initialising && regvm.transFinished" class="text-left">
	<img src="/public/img/layout/loading.gif" class="loadingImg-sm" alt="loading..." />
</div>
<accordion close-others="regdirvm.oneAtATime" ng-show="!regvm.initialising">
	<accordion-group ng-repeat="element in regdirvm.repositories">
		<accordion-heading>
			<span ng-click="regvm.getSimulationModel(element.resourceId)" tooltip="Click for more details">
  				{{ regdirvm.format(element.resourceHeader.resourceName) }}
  			</span>
  		</accordion-heading>
  		<div class="elem-metadata">
  			<strong>Release Date:</strong> 
  			{{ element.resourceHeader.releaseDate }} &nbsp;&nbsp;&nbsp;&nbsp;
  			<strong ng-hide="element.resourceHeader.description | isEmpty">Description:</strong> 
  			{{ element.resourceHeader.description }}
  		</div>
  		<div class="elem-header">
  			<span class="elem-caption" ng-hide="regdirvm.simulationModels | isEmpty">Simulation Models</span>	
  			<span class="elem-caption" ng-hide="regdirvm.simulationRuns | isEmpty">Simulation Runs</span>
	    	<span class="elem-caption" ng-hide="regdirvm.numericalOutputs | isEmpty">Numerical Outputs</span>
	    	<span class="elem-caption" ng-hide="regdirvm.granules | isEmpty">Granules</span>
	    </div>
  		<div class="btn-group-vertical btn-group-overflow" ng-hide="regdirvm.simulationModels | isEmpty">	
			<button class="btn btn-default btn-sm" 
				ng-repeat="element in regdirvm.simulationModels" 
				ng-click="regvm.getSimulationRun(element.resourceId, element, $event)" 
				ng-class="{ active: regdirvm.isActive('model', element) }"
				tooltip-html-unsafe="{{ element.resourceHeader.resourceName }}<br>{{ element.resourceHeader.releaseDate }}">
					{{ regdirvm.trim(element.resourceHeader.resourceName) }}
			</button>
		</div> 
		<div class="btn-group-vertical btn-group-overflow" ng-hide="regdirvm.simulationRuns | isEmpty">	
			<button class="btn btn-default btn-sm margin-ten" 
				ng-repeat="element in regdirvm.simulationRuns" 
				ng-click="regvm.getNumericalOutput(element.resourceId, element, $event)" 
				ng-class="{ active: regdirvm.isActive('run', element) }"
				tooltip-html-unsafe="{{ element.resourceHeader.resourceName }}<br/>{{ element.resourceHeader.releaseDate }}">
					{{ regdirvm.trim(element.resourceHeader.resourceName) }}
			</button>
		</div>
		<div class="btn-group-vertical btn-group-overflow" ng-hide="regdirvm.numericalOutputs | isEmpty">	
			<button class="btn btn-default btn-sm margin-ten" 
				ng-repeat="element in regdirvm.numericalOutputs" 
				ng-click="regvm.getGranule(element.resourceId, element, $event)" 
				ng-class="{ active: regdirvm.isActive('output', element) }"
				tooltip-html-unsafe="{{ element.resourceHeader.resourceName }}<br>{{ element.resourceHeader.releaseDate }}">
					{{ regdirvm.trim(element.resourceHeader.resourceName) }}				
			</button>
		</div>
		<div class="btn-group-vertical btn-group-overflow" ng-hide="regdirvm.granules | isEmpty">		
			<button class="btn btn-default btn-sm margin-ten" 
				ng-repeat="element in regdirvm.granules"
				ng-class="{ active: regdirvm.isActive('granule', element) }"
				tooltip-html-unsafe="{{ element.releaseDate }}<br>{{ element.resourceId }}">
					{{ regdirvm.trim(element.resourceId) }}
			</button> 
		</div>
		<div class="btn-group-vertical" style="vertical-align: top;">
			<div class="text-right" ng-show="regvm.loading" >
				<img src="/public/img/layout/loading.gif" class="loadingImg-sm" alt="loading..." />
			</div>
			<div class="error" ng-show="regdirvm.error">{{ regdirvm.errorMessage }}</div>
		</div>
	</accordion-group>
</accordion>